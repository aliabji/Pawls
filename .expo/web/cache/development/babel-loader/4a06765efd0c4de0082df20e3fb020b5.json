{"ast":null,"code":"import _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport _objectWithoutProperties from \"@babel/runtime/helpers/objectWithoutProperties\";\nvar _excluded = [\"testID\", \"index\", \"lazy\", \"renderLoading\"];\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\n\nimport React, { useCallback, useContext, useState, useMemo } from 'react';\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport Reanimated, { useAnimatedStyle, useAnimatedReaction, runOnJS } from 'react-native-reanimated';\nimport TabBarContext from \"./TabBarContext\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nexport default function TabPage(_ref) {\n  var testID = _ref.testID,\n      index = _ref.index,\n      lazy = _ref.lazy,\n      renderLoading = _ref.renderLoading,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  var _useContext = useContext(TabBarContext),\n      currentPage = _useContext.currentPage,\n      asCarousel = _useContext.asCarousel,\n      containerWidth = _useContext.containerWidth;\n\n  var _useState = useState(!lazy),\n      _useState2 = _slicedToArray(_useState, 2),\n      shouldLoad = _useState2[0],\n      setLoaded = _useState2[1];\n\n  var lazyLoad = useCallback(function () {\n    if (lazy && !shouldLoad) {\n      setLoaded(true);\n    }\n  }, [lazy, shouldLoad]);\n  useAnimatedReaction(function () {\n    var _f = function _f() {\n      return currentPage.value;\n    };\n\n    _f._closure = {\n      currentPage: currentPage\n    };\n    _f.asString = \"function _f(){const{currentPage}=jsThis._closure;{return currentPage.value;}}\";\n    _f.__workletHash = 16845019634419;\n    _f.__location = \"/Users/aliabji/code/dogs/Pawls/node_modules/react-native-ui-lib/src/components/tabController/TabPage.js (30:22)\";\n\n    global.__reanimatedWorkletInit(_f);\n\n    return _f;\n  }(), function () {\n    var _f = function _f(currentPage) {\n      var isActive = currentPage === index;\n\n      if (isActive) {\n        runOnJS(lazyLoad)();\n      }\n    };\n\n    _f._closure = {\n      index: index,\n      runOnJS: runOnJS,\n      lazyLoad: lazyLoad\n    };\n    _f.asString = \"function _f(currentPage){const{index,runOnJS,lazyLoad}=jsThis._closure;{const isActive=currentPage===index;if(isActive){runOnJS(lazyLoad)();}}}\";\n    _f.__workletHash = 1408064423786;\n    _f.__location = \"/Users/aliabji/code/dogs/Pawls/node_modules/react-native-ui-lib/src/components/tabController/TabPage.js (32:5)\";\n\n    global.__reanimatedWorkletInit(_f);\n\n    return _f;\n  }(), [currentPage]);\n  var animatedPageStyle = useAnimatedStyle(function () {\n    var _f = function _f() {\n      var isActive = Math.round(currentPage.value) === index;\n      return {\n        opacity: isActive || asCarousel ? 1 : 0,\n        zIndex: isActive || asCarousel ? 1 : 0\n      };\n    };\n\n    _f._closure = {\n      currentPage: currentPage,\n      index: index,\n      asCarousel: asCarousel\n    };\n    _f.asString = \"function _f(){const{currentPage,index,asCarousel}=jsThis._closure;{const isActive=Math.round(currentPage.value)===index;return{opacity:isActive||asCarousel?1:0,zIndex:isActive||asCarousel?1:0};}}\";\n    _f.__workletHash = 10844401194419;\n    _f.__location = \"/Users/aliabji/code/dogs/Pawls/node_modules/react-native-ui-lib/src/components/tabController/TabPage.js (49:45)\";\n    _f.__optimalization = 2;\n\n    global.__reanimatedWorkletInit(_f);\n\n    return _f;\n  }());\n  var style = useMemo(function () {\n    return [!asCarousel && styles.page, animatedPageStyle, {\n      width: asCarousel ? containerWidth : undefined\n    }];\n  }, [asCarousel, animatedPageStyle, containerWidth]);\n  return _jsxs(Reanimated.View, {\n    style: style,\n    testID: testID,\n    children: [!shouldLoad && (renderLoading == null ? void 0 : renderLoading()), shouldLoad && props.children]\n  });\n}\nvar styles = StyleSheet.create({\n  page: _objectSpread({}, StyleSheet.absoluteFillObject)\n});","map":{"version":3,"sources":["/Users/aliabji/code/dogs/Pawls/node_modules/react-native-ui-lib/src/components/tabController/TabPage.js"],"names":["React","useCallback","useContext","useState","useMemo","Reanimated","useAnimatedStyle","useAnimatedReaction","runOnJS","TabBarContext","TabPage","testID","index","lazy","renderLoading","props","currentPage","asCarousel","containerWidth","shouldLoad","setLoaded","lazyLoad","value","isActive","animatedPageStyle","Math","round","opacity","zIndex","style","styles","page","width","undefined","children","StyleSheet","create","absoluteFillObject"],"mappings":";;;;;;;;;AAAA,OAAOA,KAAP,IAAgBC,WAAhB,EAA6BC,UAA7B,EAAyCC,QAAzC,EAAmDC,OAAnD,QAAkE,OAAlE;;AAEA,OAAOC,UAAP,IAAqBC,gBAArB,EAAuCC,mBAAvC,EAA4DC,OAA5D,QAA2E,yBAA3E;AAEA,OAAOC,aAAP;;AAMA,eAAe,SAASC,OAAT,OAMZ;AAAA,MALDC,MAKC,QALDA,MAKC;AAAA,MAJDC,KAIC,QAJDA,KAIC;AAAA,MAHDC,IAGC,QAHDA,IAGC;AAAA,MAFDC,aAEC,QAFDA,aAEC;AAAA,MADEC,KACF;;AACD,oBAIIb,UAAU,CAACO,aAAD,CAJd;AAAA,MACEO,WADF,eACEA,WADF;AAAA,MAEEC,UAFF,eAEEA,UAFF;AAAA,MAGEC,cAHF,eAGEA,cAHF;;AAKA,kBAAgCf,QAAQ,CAAC,CAACU,IAAF,CAAxC;AAAA;AAAA,MAAOM,UAAP;AAAA,MAAmBC,SAAnB;;AAEA,MAAMC,QAAQ,GAAGpB,WAAW,CAAC,YAAM;AACjC,QAAIY,IAAI,IAAI,CAACM,UAAb,EAAyB;AACvBC,MAAAA,SAAS,CAAC,IAAD,CAAT;AACD;AACF,GAJ2B,EAIzB,CAACP,IAAD,EAAOM,UAAP,CAJyB,CAA5B;AAKAZ,EAAAA,mBAAmB;AAAA,2BAAO;AACxB,aAAOS,WAAW,CAACM,KAAnB;AACD,KAFkB;;AAAA;AAAA,mBA3BZN;AA2BY;AAAA;AAAA;AAAA;;AAAA;;AAAA;AAAA;AAAA,yBAEfA,WAFe,EAId;AACH,UAAMO,QAAQ,GAAGP,WAAW,KAAKJ,KAAjC;;AAKA,UAAIW,QAAJ,EAAc;AACZf,QAAAA,OAAO,CAACa,QAAD,CAAP;AACD;AAMF,KAlBkB;;AAAA;AAAA,aAzBcT,KAyBd;AAAA,eAnBjBJ,OAmBiB;AAAA,gBAnBTa;AAmBS;AAAA;AAAA;AAAA;;AAAA;;AAAA;AAAA,OAkBhB,CAACL,WAAD,CAlBgB,CAAnB;AAmBA,MAAMQ,iBAAiB,GAAGlB,gBAAgB;AAAA,2BAAO;AAC/C,UAAMiB,QAAQ,GAAGE,IAAI,CAACC,KAAL,CAAWV,WAAW,CAACM,KAAvB,MAAkCV,KAAnD;AACA,aAAO;AACLe,QAAAA,OAAO,EAAEJ,QAAQ,IAAIN,UAAZ,GAAyB,CAAzB,GAA6B,CADjC;AAELW,QAAAA,MAAM,EAAEL,QAAQ,IAAIN,UAAZ,GAAyB,CAAzB,GAA6B;AAFhC,OAAP;AAID,KANyC;;AAAA;AAAA,mBA9CdD,WA8Cc;AAAA,aA9CSJ,KA8CT;AAAA,kBA3CpBK;AA2CoB;AAAA;AAAA;AAAA;AAAA;;AAAA;;AAAA;AAAA,MAA1C;AAOA,MAAMY,KAAK,GAAGzB,OAAO,CAAC,YAAM;AAC1B,WAAO,CAAC,CAACa,UAAD,IAAea,MAAM,CAACC,IAAvB,EAA6BP,iBAA7B,EAAgD;AACrDQ,MAAAA,KAAK,EAAEf,UAAU,GAAGC,cAAH,GAAoBe;AADgB,KAAhD,CAAP;AAGD,GAJoB,EAIlB,CAAChB,UAAD,EAAaO,iBAAb,EAAgCN,cAAhC,CAJkB,CAArB;AAKA,SAAO,MAAC,UAAD,CAAY,IAAZ;AAAiB,IAAA,KAAK,EAAEW,KAAxB;AAA+B,IAAA,MAAM,EAAElB,MAAvC;AAAA,eACF,CAACQ,UAAD,KAAeL,aAAf,oBAAeA,aAAa,EAA5B,CADE,EAEFK,UAAU,IAAIJ,KAAK,CAACmB,QAFlB;AAAA,IAAP;AAOD;AACD,IAAMJ,MAAM,GAAGK,UAAU,CAACC,MAAX,CAAkB;AAC/BL,EAAAA,IAAI,oBAAOI,UAAU,CAACE,kBAAlB;AAD2B,CAAlB,CAAf","sourcesContent":["import React, { useCallback, useContext, useState, useMemo } from 'react';\nimport { StyleSheet } from 'react-native';\nimport Reanimated, { useAnimatedStyle, useAnimatedReaction, runOnJS } from 'react-native-reanimated'; // import {Freeze} from 'react-freeze';\n\nimport TabBarContext from \"./TabBarContext\";\n\n/**\n * @description: TabController's TabPage\n * @example: https://github.com/wix/react-native-ui-lib/blob/master/demo/src/screens/componentScreens/TabControllerScreen/index.tsx\n */\nexport default function TabPage({\n  testID,\n  index,\n  lazy,\n  renderLoading,\n  ...props\n}) {\n  const {\n    currentPage,\n    asCarousel,\n    containerWidth\n  } = useContext(TabBarContext);\n  const [shouldLoad, setLoaded] = useState(!lazy); // const [focused, setFocused] = useState(false);\n\n  const lazyLoad = useCallback(() => {\n    if (lazy && !shouldLoad) {\n      setLoaded(true);\n    }\n  }, [lazy, shouldLoad]);\n  useAnimatedReaction(() => {\n    return currentPage.value;\n  }, (currentPage\n  /* , previousPage */\n  ) => {\n    const isActive = currentPage === index; // const wasActive = previousPage === index;\n    // const nearActive = asCarousel && (currentPage - 1 === index || currentPage + 1 === index);\n    // const wasNearActive =\n    //     asCarousel && previousPage !== null && (previousPage - 1 === index || previousPage + 1 === index);\n\n    if (isActive) {\n      runOnJS(lazyLoad)();\n    } // if (isActive || nearActive) {\n    //   runOnJS(setFocused)(true);\n    // } else if (wasActive || wasNearActive) {\n    //   runOnJS(setFocused)(false);\n    // }\n\n  }, [currentPage]);\n  const animatedPageStyle = useAnimatedStyle(() => {\n    const isActive = Math.round(currentPage.value) === index;\n    return {\n      opacity: isActive || asCarousel ? 1 : 0,\n      zIndex: isActive || asCarousel ? 1 : 0\n    };\n  });\n  const style = useMemo(() => {\n    return [!asCarousel && styles.page, animatedPageStyle, {\n      width: asCarousel ? containerWidth : undefined\n    }];\n  }, [asCarousel, animatedPageStyle, containerWidth]);\n  return <Reanimated.View style={style} testID={testID}>\n      {!shouldLoad && renderLoading?.()}\n      {shouldLoad && props.children}\n      {\n      /* <Freeze freeze={!shouldLoad || !focused}>{props.children}</Freeze> */\n    }\n    </Reanimated.View>;\n}\nconst styles = StyleSheet.create({\n  page: { ...StyleSheet.absoluteFillObject\n  }\n});"]},"metadata":{},"sourceType":"module"}