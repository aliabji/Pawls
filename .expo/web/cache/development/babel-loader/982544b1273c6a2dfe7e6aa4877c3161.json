{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport _defineProperty from \"@babel/runtime/helpers/defineProperty\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\n\nimport _pt from \"prop-types\";\nimport React, { useMemo, useContext, useState, useRef } from 'react';\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport Platform from \"react-native-web/dist/exports/Platform\";\nimport Reanimated, { runOnJS, useAnimatedReaction, useAnimatedStyle, interpolate } from 'react-native-reanimated';\nimport _ from 'lodash';\nimport TabBarContext from \"./TabBarContext\";\nimport TabBarItem from \"./TabBarItem\";\nimport { Constants, asBaseComponent, forwardRef } from \"../../commons/new\";\nimport View from \"../view\";\nimport { Colors, Spacings, Typography } from \"../../style\";\nimport FadedScrollView from \"../fadedScrollView\";\nimport useScrollToItem from \"./useScrollToItem\";\nimport { useDidUpdate } from \"../../hooks\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nvar DEFAULT_HEIGHT = 48;\nvar DEFAULT_BACKGROUND_COLOR = Colors.white;\n\nvar DEFAULT_LABEL_STYLE = _objectSpread(_objectSpread({}, Typography.text80M), {}, {\n  letterSpacing: 0\n});\n\nvar DEFAULT_SELECTED_LABEL_STYLE = _objectSpread(_objectSpread({}, Typography.text80M), {}, {\n  letterSpacing: 0\n});\n\nvar FADER_PROPS = {\n  size: 76\n};\n\nvar TabBar = function TabBar(props) {\n  var propsItems = props.items,\n      height = props.height,\n      enableShadow = props.enableShadow,\n      propsShadowStyle = props.shadowStyle,\n      indicatorStyle = props.indicatorStyle,\n      labelStyle = props.labelStyle,\n      selectedLabelStyle = props.selectedLabelStyle,\n      labelColor = props.labelColor,\n      selectedLabelColor = props.selectedLabelColor,\n      uppercase = props.uppercase,\n      iconColor = props.iconColor,\n      selectedIconColor = props.selectedIconColor,\n      activeBackgroundColor = props.activeBackgroundColor,\n      backgroundColor = props.backgroundColor,\n      propsContainerWidth = props.containerWidth,\n      centerSelected = props.centerSelected,\n      spreadItems = props.spreadItems,\n      _props$indicatorInset = props.indicatorInsets,\n      indicatorInsets = _props$indicatorInset === void 0 ? Spacings.s4 : _props$indicatorInset,\n      containerStyle = props.containerStyle,\n      testID = props.testID;\n  var tabBar = useRef();\n\n  var _useState = useState(Constants.orientation),\n      _useState2 = _slicedToArray(_useState, 2),\n      key = _useState2[0],\n      setKey = _useState2[1];\n\n  var context = useContext(TabBarContext);\n  var contextItems = context.items,\n      currentPage = context.currentPage,\n      targetPage = context.targetPage,\n      initialIndex = context.initialIndex,\n      selectedIndex = context.selectedIndex,\n      contextContainerWidth = context.containerWidth;\n  var containerWidth = useMemo(function () {\n    return propsContainerWidth || contextContainerWidth;\n  }, [propsContainerWidth, contextContainerWidth]);\n  var items = useMemo(function () {\n    return contextItems || propsItems;\n  }, [contextItems, propsItems]);\n  var itemsCount = (items == null ? void 0 : items.length) || 0;\n\n  var _useScrollToItem = useScrollToItem({\n    scrollViewRef: tabBar,\n    itemsCount: itemsCount,\n    selectedIndex: selectedIndex || initialIndex,\n    containerWidth: containerWidth,\n    offsetType: centerSelected ? useScrollToItem.offsetType.CENTER : useScrollToItem.offsetType.DYNAMIC\n  }),\n      onItemLayout = _useScrollToItem.onItemLayout,\n      itemsWidthsAnimated = _useScrollToItem.itemsWidthsAnimated,\n      itemsOffsetsAnimated = _useScrollToItem.itemsOffsetsAnimated,\n      focusIndex = _useScrollToItem.focusIndex,\n      reset = _useScrollToItem.reset,\n      onContentSizeChange = _useScrollToItem.onContentSizeChange,\n      onLayout = _useScrollToItem.onLayout;\n\n  useAnimatedReaction(function () {\n    var _f = function _f() {\n      return Math.round(currentPage.value);\n    };\n\n    _f._closure = {\n      currentPage: currentPage\n    };\n    _f.asString = \"function _f(){const{currentPage}=jsThis._closure;{return Math.round(currentPage.value);}}\";\n    _f.__workletHash = 2235578649486;\n    _f.__location = \"/Users/aliabji/code/dogs/Pawls/node_modules/react-native-ui-lib/src/components/tabController/TabBar.js (89:22)\";\n\n    global.__reanimatedWorkletInit(_f);\n\n    return _f;\n  }(), function () {\n    var _f = function _f(currIndex, prevIndex) {\n      if (prevIndex !== null && currIndex !== prevIndex) {\n        runOnJS(focusIndex)(currIndex);\n      }\n    };\n\n    _f._closure = {\n      runOnJS: runOnJS,\n      focusIndex: focusIndex\n    };\n    _f.asString = \"function _f(currIndex,prevIndex){const{runOnJS,focusIndex}=jsThis._closure;{if(prevIndex!==null&&currIndex!==prevIndex){runOnJS(focusIndex)(currIndex);}}}\";\n    _f.__workletHash = 15694012263272;\n    _f.__location = \"/Users/aliabji/code/dogs/Pawls/node_modules/react-native-ui-lib/src/components/tabController/TabBar.js (91:5)\";\n\n    global.__reanimatedWorkletInit(_f);\n\n    return _f;\n  }());\n  var tabBarItems = useMemo(function () {\n    return _.map(items, function (item, index) {\n      return _jsx(TabBarItem, _objectSpread(_objectSpread(_objectSpread({\n        labelColor: labelColor,\n        selectedLabelColor: selectedLabelColor,\n        labelStyle: labelStyle,\n        selectedLabelStyle: selectedLabelStyle,\n        uppercase: uppercase,\n        iconColor: iconColor,\n        selectedIconColor: selectedIconColor,\n        activeBackgroundColor: activeBackgroundColor\n      }, item), context), {}, {\n        index: index,\n        onLayout: onItemLayout\n      }), item.label);\n    });\n  }, [items, labelColor, selectedLabelColor, labelStyle, selectedLabelStyle, uppercase, iconColor, selectedIconColor, activeBackgroundColor, centerSelected, onItemLayout]);\n\n  var _indicatorTransitionStyle = useAnimatedStyle(function () {\n    var _f = function _f() {\n      var value = targetPage.value;\n      var width = interpolate(value, itemsWidthsAnimated.value.map(function (_v, i) {\n        return i;\n      }), itemsWidthsAnimated.value.map(function (v) {\n        return v - 2 * indicatorInsets;\n      }));\n      var left = interpolate(value, itemsOffsetsAnimated.value.map(function (_v, i) {\n        return i;\n      }), itemsOffsetsAnimated.value);\n      return {\n        marginHorizontal: indicatorInsets,\n        width: width,\n        left: left\n      };\n    };\n\n    _f._closure = {\n      targetPage: targetPage,\n      interpolate: interpolate,\n      itemsWidthsAnimated: itemsWidthsAnimated,\n      indicatorInsets: indicatorInsets,\n      itemsOffsetsAnimated: itemsOffsetsAnimated\n    };\n    _f.asString = \"function _f(){const{targetPage,interpolate,itemsWidthsAnimated,indicatorInsets,itemsOffsetsAnimated}=jsThis._closure;{const value=targetPage.value;const width=interpolate(value,itemsWidthsAnimated.value.map(function(_v,i){return i;}),itemsWidthsAnimated.value.map(function(v){return v-2*indicatorInsets;}));const left=interpolate(value,itemsOffsetsAnimated.value.map(function(_v,i){return i;}),itemsOffsetsAnimated.value);return{marginHorizontal:indicatorInsets,width:width,left:left};}}\";\n    _f.__workletHash = 14916953719219;\n    _f.__location = \"/Users/aliabji/code/dogs/Pawls/node_modules/react-native-ui-lib/src/components/tabController/TabBar.js (102:53)\";\n    _f.__optimalization = 2;\n\n    global.__reanimatedWorkletInit(_f);\n\n    return _f;\n  }());\n\n  var shadowStyle = useMemo(function () {\n    return enableShadow ? propsShadowStyle || styles.containerShadow : undefined;\n  }, [enableShadow, propsShadowStyle]);\n\n  var _containerStyle = useMemo(function () {\n    return [styles.container, shadowStyle, {\n      width: containerWidth\n    }, containerStyle];\n  }, [shadowStyle, containerWidth, containerStyle]);\n\n  var tabBarContainerStyle = useMemo(function () {\n    return [styles.tabBar, spreadItems && styles.spreadItems, !_.isUndefined(height) && {\n      height: height\n    }, {\n      backgroundColor: backgroundColor\n    }];\n  }, [height, backgroundColor]);\n  var scrollViewContainerStyle = useMemo(function () {\n    return {\n      minWidth: containerWidth\n    };\n  }, [containerWidth]);\n  useDidUpdate(function () {\n    var _tabBar$current;\n\n    if ((_tabBar$current = tabBar.current) != null && _tabBar$current.isScrollEnabled()) {\n      focusIndex(currentPage.value);\n    } else {\n      reset();\n      setKey(Constants.orientation);\n    }\n  }, [containerWidth]);\n  return _jsx(View, {\n    style: _containerStyle,\n    children: _jsxs(FadedScrollView, {\n      ref: tabBar,\n      horizontal: true,\n      showsHorizontalScrollIndicator: false,\n      showStartFader: true,\n      startFaderProps: FADER_PROPS,\n      showEndFader: true,\n      endFaderProps: FADER_PROPS,\n      contentContainerStyle: scrollViewContainerStyle,\n      testID: testID,\n      onContentSizeChange: onContentSizeChange,\n      onLayout: onLayout,\n      children: [_jsx(View, {\n        style: tabBarContainerStyle,\n        children: tabBarItems\n      }), itemsCount > 1 && _jsx(Reanimated.View, {\n        style: [styles.selectedIndicator, indicatorStyle, _indicatorTransitionStyle]\n      })]\n    })\n  }, key);\n};\n\nTabBar.propTypes = {\n  items: _pt.array,\n  height: _pt.number,\n  enableShadow: _pt.bool,\n  labelColor: _pt.string,\n  selectedLabelColor: _pt.string,\n  uppercase: _pt.bool,\n  iconColor: _pt.string,\n  selectedIconColor: _pt.string,\n  activeBackgroundColor: _pt.string,\n  backgroundColor: _pt.string,\n  containerWidth: _pt.number,\n  centerSelected: _pt.bool,\n  spreadItems: _pt.bool,\n  indicatorInsets: _pt.number,\n  testID: _pt.string,\n  children: _pt.oneOfType([_pt.arrayOf(_pt.element), _pt.element])\n};\nTabBar.displayName = 'TabController.TabBar';\nTabBar.defaultProps = {\n  labelStyle: DEFAULT_LABEL_STYLE,\n  selectedLabelStyle: DEFAULT_SELECTED_LABEL_STYLE,\n  backgroundColor: DEFAULT_BACKGROUND_COLOR,\n  spreadItems: true\n};\nvar styles = StyleSheet.create({\n  container: {\n    zIndex: 100\n  },\n  tabBar: {\n    height: DEFAULT_HEIGHT,\n    flexDirection: 'row',\n    justifyContent: 'space-between'\n  },\n  tab: {\n    flex: 1,\n    alignItems: 'center',\n    justifyContent: 'center'\n  },\n  selectedIndicator: {\n    position: 'absolute',\n    bottom: 0,\n    left: 0,\n    width: 70,\n    height: 2,\n    backgroundColor: Colors.primary\n  },\n  containerShadow: _objectSpread({}, Platform.select({\n    ios: {\n      shadowColor: Colors.grey10,\n      shadowOpacity: 0.05,\n      shadowRadius: 2,\n      shadowOffset: {\n        height: 6,\n        width: 0\n      }\n    },\n    android: {\n      elevation: 5,\n      backgroundColor: Colors.white\n    }\n  })),\n  spreadItems: {\n    flex: 1\n  }\n});\nexport default asBaseComponent(forwardRef(TabBar));","map":{"version":3,"sources":["/Users/aliabji/code/dogs/Pawls/node_modules/react-native-ui-lib/src/components/tabController/TabBar.js"],"names":["_pt","React","useMemo","useContext","useState","useRef","Reanimated","runOnJS","useAnimatedReaction","useAnimatedStyle","interpolate","_","TabBarContext","TabBarItem","Constants","asBaseComponent","forwardRef","View","Colors","Spacings","Typography","FadedScrollView","useScrollToItem","useDidUpdate","DEFAULT_HEIGHT","DEFAULT_BACKGROUND_COLOR","white","DEFAULT_LABEL_STYLE","text80M","letterSpacing","DEFAULT_SELECTED_LABEL_STYLE","FADER_PROPS","size","TabBar","props","propsItems","items","height","enableShadow","propsShadowStyle","shadowStyle","indicatorStyle","labelStyle","selectedLabelStyle","labelColor","selectedLabelColor","uppercase","iconColor","selectedIconColor","activeBackgroundColor","backgroundColor","propsContainerWidth","containerWidth","centerSelected","spreadItems","indicatorInsets","s4","containerStyle","testID","tabBar","orientation","key","setKey","context","contextItems","currentPage","targetPage","initialIndex","selectedIndex","contextContainerWidth","itemsCount","length","scrollViewRef","offsetType","CENTER","DYNAMIC","onItemLayout","itemsWidthsAnimated","itemsOffsetsAnimated","focusIndex","reset","onContentSizeChange","onLayout","Math","round","value","currIndex","prevIndex","tabBarItems","map","item","index","label","_indicatorTransitionStyle","width","_v","i","v","left","marginHorizontal","styles","containerShadow","undefined","_containerStyle","container","tabBarContainerStyle","isUndefined","scrollViewContainerStyle","minWidth","current","isScrollEnabled","selectedIndicator","propTypes","array","number","bool","string","children","oneOfType","arrayOf","element","displayName","defaultProps","StyleSheet","create","zIndex","flexDirection","justifyContent","tab","flex","alignItems","position","bottom","primary","Platform","select","ios","shadowColor","grey10","shadowOpacity","shadowRadius","shadowOffset","android","elevation"],"mappings":"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","sourcesContent":["import _pt from \"prop-types\";\nimport React, { useMemo, useContext, useState, useRef } from 'react';\nimport { StyleSheet, Platform } from 'react-native';\nimport Reanimated, { runOnJS, useAnimatedReaction, useAnimatedStyle, interpolate } from 'react-native-reanimated';\nimport _ from 'lodash';\nimport TabBarContext from \"./TabBarContext\";\nimport TabBarItem from \"./TabBarItem\";\nimport { Constants, asBaseComponent, forwardRef } from \"../../commons/new\";\nimport View from \"../view\";\nimport { Colors, Spacings, Typography } from \"../../style\";\nimport FadedScrollView from \"../fadedScrollView\";\nimport useScrollToItem from \"./useScrollToItem\";\nimport { useDidUpdate } from \"../../hooks\";\nconst DEFAULT_HEIGHT = 48;\nconst DEFAULT_BACKGROUND_COLOR = Colors.white;\nconst DEFAULT_LABEL_STYLE = { ...Typography.text80M,\n  letterSpacing: 0\n};\nconst DEFAULT_SELECTED_LABEL_STYLE = { ...Typography.text80M,\n  letterSpacing: 0\n};\nconst FADER_PROPS = {\n  size: 76\n};\n/**\n * @description: TabController's TabBar component\n * @example: https://github.com/wix/react-native-ui-lib/blob/master/demo/src/screens/componentScreens/TabControllerScreen/index.tsx\n */\n\nconst TabBar = props => {\n  const {\n    items: propsItems,\n    height,\n    enableShadow,\n    shadowStyle: propsShadowStyle,\n    indicatorStyle,\n    labelStyle,\n    selectedLabelStyle,\n    labelColor,\n    selectedLabelColor,\n    uppercase,\n    iconColor,\n    selectedIconColor,\n    activeBackgroundColor,\n    backgroundColor,\n    containerWidth: propsContainerWidth,\n    centerSelected,\n    spreadItems,\n    indicatorInsets = Spacings.s4,\n    containerStyle,\n    testID\n  } = props;\n  const tabBar = useRef();\n  const [key, setKey] = useState(Constants.orientation);\n  const context = useContext(TabBarContext);\n  const {\n    items: contextItems,\n    currentPage,\n    targetPage,\n    initialIndex,\n    selectedIndex,\n    containerWidth: contextContainerWidth\n  } = context;\n  const containerWidth = useMemo(() => {\n    return propsContainerWidth || contextContainerWidth;\n  }, [propsContainerWidth, contextContainerWidth]);\n  const items = useMemo(() => {\n    return contextItems || propsItems;\n  }, [contextItems, propsItems]);\n  const itemsCount = items?.length || 0;\n  const {\n    onItemLayout,\n    itemsWidthsAnimated,\n    itemsOffsetsAnimated,\n    // itemsWidths,\n    // itemsOffsets,\n    focusIndex,\n    reset,\n    onContentSizeChange,\n    onLayout\n  } = useScrollToItem({\n    // @ts-expect-error TODO: typing bug\n    scrollViewRef: tabBar,\n    itemsCount,\n    selectedIndex: selectedIndex || initialIndex,\n    containerWidth,\n    offsetType: centerSelected ? useScrollToItem.offsetType.CENTER : useScrollToItem.offsetType.DYNAMIC\n  });\n  useAnimatedReaction(() => {\n    return Math.round(currentPage.value);\n  }, (currIndex, prevIndex) => {\n    if (prevIndex !== null && currIndex !== prevIndex) {\n      runOnJS(focusIndex)(currIndex);\n    }\n  });\n  const tabBarItems = useMemo(() => {\n    return _.map(items, (item, index) => {\n      return <TabBarItem labelColor={labelColor} selectedLabelColor={selectedLabelColor} labelStyle={labelStyle} selectedLabelStyle={selectedLabelStyle} uppercase={uppercase} iconColor={iconColor} selectedIconColor={selectedIconColor} activeBackgroundColor={activeBackgroundColor} key={item.label} {...item} {...context} index={index} onLayout={onItemLayout} />;\n    });\n  }, [items, labelColor, selectedLabelColor, labelStyle, selectedLabelStyle, uppercase, iconColor, selectedIconColor, activeBackgroundColor, centerSelected, onItemLayout]);\n\n  const _indicatorTransitionStyle = useAnimatedStyle(() => {\n    const value = targetPage.value;\n    const width = interpolate(value, itemsWidthsAnimated.value.map((_v, i) => i), itemsWidthsAnimated.value.map(v => v - 2 * indicatorInsets));\n    const left = interpolate(value, itemsOffsetsAnimated.value.map((_v, i) => i), itemsOffsetsAnimated.value);\n    return {\n      marginHorizontal: indicatorInsets,\n      width,\n      left\n    };\n  });\n\n  const shadowStyle = useMemo(() => {\n    return enableShadow ? propsShadowStyle || styles.containerShadow : undefined;\n  }, [enableShadow, propsShadowStyle]);\n\n  const _containerStyle = useMemo(() => {\n    return [styles.container, shadowStyle, {\n      width: containerWidth\n    }, containerStyle];\n  }, [shadowStyle, containerWidth, containerStyle]);\n\n  const tabBarContainerStyle = useMemo(() => {\n    return [styles.tabBar, spreadItems && styles.spreadItems, !_.isUndefined(height) && {\n      height\n    }, {\n      backgroundColor\n    }];\n  }, [height, backgroundColor]);\n  const scrollViewContainerStyle = useMemo(() => {\n    return {\n      minWidth: containerWidth\n    };\n  }, [containerWidth]);\n  useDidUpdate(() => {\n    if (tabBar.current?.isScrollEnabled()) {\n      focusIndex(currentPage.value);\n    } else {\n      reset();\n      setKey(Constants.orientation);\n    }\n  }, [containerWidth]);\n  return <View style={_containerStyle} key={key}>\n      <FadedScrollView // @ts-expect-error\n    ref={tabBar} horizontal showsHorizontalScrollIndicator={false} showStartFader startFaderProps={FADER_PROPS} showEndFader endFaderProps={FADER_PROPS} contentContainerStyle={scrollViewContainerStyle} testID={testID} onContentSizeChange={onContentSizeChange} onLayout={onLayout}>\n        <View style={tabBarContainerStyle}>{tabBarItems}</View>\n        {itemsCount > 1 && <Reanimated.View style={[styles.selectedIndicator, indicatorStyle, _indicatorTransitionStyle]} />}\n      </FadedScrollView>\n    </View>;\n};\n\nTabBar.propTypes = {\n  /**\n     * The list of tab bar items\n     */\n  items: _pt.array,\n\n  /**\n     * Tab Bar height\n     */\n  height: _pt.number,\n\n  /**\n     * Show Tab Bar bottom shadow\n     */\n  enableShadow: _pt.bool,\n\n  /**\n     * the default label color\n     */\n  labelColor: _pt.string,\n\n  /**\n     * the selected label color\n     */\n  selectedLabelColor: _pt.string,\n\n  /**\n     * whether to change the text to uppercase\n     */\n  uppercase: _pt.bool,\n\n  /**\n     * icon tint color\n     */\n  iconColor: _pt.string,\n\n  /**\n     * icon selected tint color\n     */\n  selectedIconColor: _pt.string,\n\n  /**\n     * TODO: rename to feedbackColor\n     * Apply background color on press for TouchableOpacity\n     */\n  activeBackgroundColor: _pt.string,\n\n  /**\n     * The TabBar background Color\n     */\n  backgroundColor: _pt.string,\n\n  /**\n     * The TabBar container width\n     */\n  containerWidth: _pt.number,\n\n  /**\n     * Pass to center selected item\n     */\n  centerSelected: _pt.bool,\n\n  /**\n     * Whether the tabBar should be spread (default: true)\n     */\n  spreadItems: _pt.bool,\n\n  /**\n     * The indicator insets (default: Spacings.s4, set to 0 to make it wide as the item)\n     */\n  indicatorInsets: _pt.number,\n\n  /**\n     * Used as a testing identifier\n     */\n  testID: _pt.string,\n  children: _pt.oneOfType([_pt.arrayOf(_pt.element), _pt.element])\n};\nTabBar.displayName = 'TabController.TabBar';\nTabBar.defaultProps = {\n  labelStyle: DEFAULT_LABEL_STYLE,\n  selectedLabelStyle: DEFAULT_SELECTED_LABEL_STYLE,\n  backgroundColor: DEFAULT_BACKGROUND_COLOR,\n  spreadItems: true\n};\nconst styles = StyleSheet.create({\n  container: {\n    zIndex: 100\n  },\n  tabBar: {\n    height: DEFAULT_HEIGHT,\n    flexDirection: 'row',\n    justifyContent: 'space-between'\n  },\n  tab: {\n    flex: 1,\n    alignItems: 'center',\n    justifyContent: 'center'\n  },\n  selectedIndicator: {\n    position: 'absolute',\n    bottom: 0,\n    left: 0,\n    width: 70,\n    height: 2,\n    backgroundColor: Colors.primary\n  },\n  containerShadow: { ...Platform.select({\n      ios: {\n        shadowColor: Colors.grey10,\n        shadowOpacity: 0.05,\n        shadowRadius: 2,\n        shadowOffset: {\n          height: 6,\n          width: 0\n        }\n      },\n      android: {\n        elevation: 5,\n        backgroundColor: Colors.white\n      }\n    })\n  },\n  spreadItems: {\n    flex: 1\n  }\n});\nexport default asBaseComponent(forwardRef(TabBar));"]},"metadata":{},"sourceType":"module"}