{"ast":null,"code":"import _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nimport _objectWithoutProperties from \"@babel/runtime/helpers/objectWithoutProperties\";\nvar _excluded = [\"directions\", \"dismissible\", \"animateToOrigin\", \"onDismiss\", \"directionLock\", \"threshold\", \"containerStyle\", \"children\"];\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\n\nimport _pt from \"prop-types\";\nimport { isEmpty } from 'lodash';\nimport React, { useCallback } from 'react';\nimport { PanGestureHandler } from 'react-native-gesture-handler';\nimport Animated, { useSharedValue, useAnimatedStyle, withSpring, withTiming, useAnimatedGestureHandler, runOnJS } from 'react-native-reanimated';\nimport { asBaseComponent } from \"../../commons/new\";\nimport View from \"../../components/view\";\nimport { PanningDirections, PanningDirectionsEnum, getTranslation, getDismissVelocity, DEFAULT_THRESHOLD } from \"./panningUtil\";\nimport useHiddenLocation from \"../hooks/useHiddenLocation\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nvar PanViewDirectionsEnum = PanningDirectionsEnum;\nexport { PanningDirections, PanningDirectionsEnum, PanViewDirectionsEnum };\nvar SPRING_BACK_ANIMATION_CONFIG = {\n  velocity: 300,\n  damping: 20,\n  stiffness: 300,\n  mass: 0.8\n};\n\nvar PanView = function PanView(props) {\n  var _props$directions = props.directions,\n      directions = _props$directions === void 0 ? [PanViewDirectionsEnum.UP, PanViewDirectionsEnum.DOWN, PanViewDirectionsEnum.LEFT, PanViewDirectionsEnum.RIGHT] : _props$directions,\n      dismissible = props.dismissible,\n      animateToOrigin = props.animateToOrigin,\n      onDismiss = props.onDismiss,\n      directionLock = props.directionLock,\n      threshold = props.threshold,\n      containerStyle = props.containerStyle,\n      children = props.children,\n      others = _objectWithoutProperties(props, _excluded);\n\n  var waitingForDismiss = useSharedValue(false);\n  var translationX = useSharedValue(0);\n  var translationY = useSharedValue(0);\n  var animatedStyle = useAnimatedStyle(function () {\n    var _f = function _f() {\n      return {\n        transform: [{\n          translateX: translationX.value\n        }, {\n          translateY: translationY.value\n        }]\n      };\n    };\n\n    _f._closure = {\n      translationX: translationX,\n      translationY: translationY\n    };\n    _f.asString = \"function _f(){const{translationX,translationY}=jsThis._closure;{return{transform:[{translateX:translationX.value},{translateY:translationY.value}]};}}\";\n    _f.__workletHash = 16366799328993;\n    _f.__location = \"/Users/aliabji/code/dogs/Pawls/node_modules/react-native-ui-lib/src/incubator/panView/index.js (34:41)\";\n    _f.__optimalization = 3;\n\n    global.__reanimatedWorkletInit(_f);\n\n    return _f;\n  }(), []);\n  var containerRef = React.createRef();\n\n  var _useHiddenLocation = useHiddenLocation({\n    containerRef: containerRef\n  }),\n      onLayout = _useHiddenLocation.onLayout,\n      hiddenLocation = _useHiddenLocation.hiddenLocation;\n\n  var getTranslationOptions = function () {\n    var _f = function _f() {\n      return {\n        directionLock: directionLock,\n        currentTranslation: {\n          x: translationX.value,\n          y: translationY.value\n        }\n      };\n    };\n\n    _f._closure = {\n      directionLock: directionLock,\n      translationX: translationX,\n      translationY: translationY\n    };\n    _f.asString = \"function _f(){const{directionLock,translationX,translationY}=jsThis._closure;{return{directionLock:directionLock,currentTranslation:{x:translationX.value,y:translationY.value}};}}\";\n    _f.__workletHash = 4921563924443;\n    _f.__location = \"/Users/aliabji/code/dogs/Pawls/node_modules/react-native-ui-lib/src/incubator/panView/index.js (51:32)\";\n\n    global.__reanimatedWorkletInit(_f);\n\n    return _f;\n  }();\n\n  var setTranslation = function () {\n    var _f = function _f(event, initialTranslation) {\n      var result = getTranslation(event, initialTranslation, directions, getTranslationOptions());\n      translationX.value = result.x;\n      translationY.value = result.y;\n    };\n\n    _f._closure = {\n      getTranslation: getTranslation,\n      directions: directions,\n      getTranslationOptions: getTranslationOptions,\n      translationX: translationX,\n      translationY: translationY\n    };\n    _f.asString = \"function _f(event,initialTranslation){const{getTranslation,directions,getTranslationOptions,translationX,translationY}=jsThis._closure;{const result=getTranslation(event,initialTranslation,directions,getTranslationOptions());translationX.value=result.x;translationY.value=result.y;}}\";\n    _f.__workletHash = 5537007268172;\n    _f.__location = \"/Users/aliabji/code/dogs/Pawls/node_modules/react-native-ui-lib/src/incubator/panView/index.js (63:25)\";\n\n    global.__reanimatedWorkletInit(_f);\n\n    return _f;\n  }();\n\n  var dismiss = useCallback(function () {\n    var _f = function _f(isFinished) {\n      if (isFinished && waitingForDismiss.value && onDismiss) {\n        waitingForDismiss.value = false;\n        runOnJS(onDismiss)();\n      }\n    };\n\n    _f._closure = {\n      waitingForDismiss: waitingForDismiss,\n      onDismiss: onDismiss,\n      runOnJS: runOnJS\n    };\n    _f.asString = \"function _f(isFinished){const{waitingForDismiss,onDismiss,runOnJS}=jsThis._closure;{if(isFinished&&waitingForDismiss.value&&onDismiss){waitingForDismiss.value=false;runOnJS(onDismiss)();}}}\";\n    _f.__workletHash = 11391575833406;\n    _f.__location = \"/Users/aliabji/code/dogs/Pawls/node_modules/react-native-ui-lib/src/incubator/panView/index.js (71:30)\";\n\n    global.__reanimatedWorkletInit(_f);\n\n    return _f;\n  }(), [onDismiss]);\n  var returnToOrigin = useCallback(function () {\n    var _f = function _f() {\n      if (animateToOrigin) {\n        translationX.value = withSpring(0, SPRING_BACK_ANIMATION_CONFIG);\n        translationY.value = withSpring(0, SPRING_BACK_ANIMATION_CONFIG);\n      }\n    };\n\n    _f._closure = {\n      animateToOrigin: animateToOrigin,\n      translationX: translationX,\n      withSpring: withSpring,\n      SPRING_BACK_ANIMATION_CONFIG: SPRING_BACK_ANIMATION_CONFIG,\n      translationY: translationY\n    };\n    _f.asString = \"function _f(){const{animateToOrigin,translationX,withSpring,SPRING_BACK_ANIMATION_CONFIG,translationY}=jsThis._closure;{if(animateToOrigin){translationX.value=withSpring(0,SPRING_BACK_ANIMATION_CONFIG);translationY.value=withSpring(0,SPRING_BACK_ANIMATION_CONFIG);}}}\";\n    _f.__workletHash = 6077814463525;\n    _f.__location = \"/Users/aliabji/code/dogs/Pawls/node_modules/react-native-ui-lib/src/incubator/panView/index.js (80:37)\";\n\n    global.__reanimatedWorkletInit(_f);\n\n    return _f;\n  }(), [animateToOrigin]);\n  var onGestureEvent = useAnimatedGestureHandler({\n    onStart: function () {\n      var _f = function _f(_event, context) {\n        context.initialTranslation = {\n          x: translationX.value,\n          y: translationY.value\n        };\n      };\n\n      _f._closure = {\n        translationX: translationX,\n        translationY: translationY\n      };\n      _f.asString = \"function _f(_event,context){const{translationX,translationY}=jsThis._closure;{context.initialTranslation={x:translationX.value,y:translationY.value};}}\";\n      _f.__workletHash = 13404114133506;\n      _f.__location = \"/Users/aliabji/code/dogs/Pawls/node_modules/react-native-ui-lib/src/incubator/panView/index.js (90:13)\";\n\n      global.__reanimatedWorkletInit(_f);\n\n      return _f;\n    }(),\n    onActive: function () {\n      var _f = function _f(event, context) {\n        setTranslation(event, context.initialTranslation);\n      };\n\n      _f._closure = {\n        setTranslation: setTranslation\n      };\n      _f.asString = \"function _f(event,context){const{setTranslation}=jsThis._closure;{setTranslation(event,context.initialTranslation);}}\";\n      _f.__workletHash = 4421524005574;\n      _f.__location = \"/Users/aliabji/code/dogs/Pawls/node_modules/react-native-ui-lib/src/incubator/panView/index.js (96:14)\";\n\n      global.__reanimatedWorkletInit(_f);\n\n      return _f;\n    }(),\n    onEnd: function () {\n      var _f = function _f(event) {\n        if (dismissible) {\n          var velocity = getDismissVelocity(event, directions, getTranslationOptions(), threshold);\n\n          if (velocity) {\n            waitingForDismiss.value = true;\n\n            if (translationX.value !== 0 && velocity.x !== undefined && velocity.x !== 0) {\n              var toX = velocity.x > 0 ? hiddenLocation.right : hiddenLocation.left;\n              var duration = Math.abs((toX - translationX.value) / velocity.x) * 1000;\n              translationX.value = withTiming(toX, {\n                duration: duration\n              }, dismiss);\n            }\n\n            if (translationY.value !== 0 && velocity.y !== undefined && velocity.y !== 0) {\n              var toY = velocity.y > 0 ? hiddenLocation.down : hiddenLocation.up;\n\n              var _duration = Math.abs((toY - translationY.value) / velocity.y) * 1000;\n\n              translationY.value = withTiming(toY, {\n                duration: _duration\n              }, dismiss);\n            }\n          } else {\n            returnToOrigin();\n          }\n        } else {\n          returnToOrigin();\n        }\n      };\n\n      _f._closure = {\n        dismissible: dismissible,\n        getDismissVelocity: getDismissVelocity,\n        directions: directions,\n        getTranslationOptions: getTranslationOptions,\n        threshold: threshold,\n        waitingForDismiss: waitingForDismiss,\n        translationX: translationX,\n        hiddenLocation: {\n          right: hiddenLocation.right,\n          left: hiddenLocation.left,\n          down: hiddenLocation.down,\n          up: hiddenLocation.up\n        },\n        withTiming: withTiming,\n        dismiss: dismiss,\n        translationY: translationY,\n        returnToOrigin: returnToOrigin\n      };\n      _f.asString = \"function _f(event){const{dismissible,getDismissVelocity,directions,getTranslationOptions,threshold,waitingForDismiss,translationX,hiddenLocation,withTiming,dismiss,translationY,returnToOrigin}=jsThis._closure;{if(dismissible){const velocity=getDismissVelocity(event,directions,getTranslationOptions(),threshold);if(velocity){waitingForDismiss.value=true;if(translationX.value!==0&&velocity.x!==undefined&&velocity.x!==0){const toX=velocity.x>0?hiddenLocation.right:hiddenLocation.left;const duration=Math.abs((toX-translationX.value)/velocity.x)*1000;translationX.value=withTiming(toX,{duration:duration},dismiss);}if(translationY.value!==0&&velocity.y!==undefined&&velocity.y!==0){const toY=velocity.y>0?hiddenLocation.down:hiddenLocation.up;const duration=Math.abs((toY-translationY.value)/velocity.y)*1000;translationY.value=withTiming(toY,{duration:duration},dismiss);}}else{returnToOrigin();}}else{returnToOrigin();}}}\";\n      _f.__workletHash = 16404704228934;\n      _f.__location = \"/Users/aliabji/code/dogs/Pawls/node_modules/react-native-ui-lib/src/incubator/panView/index.js (99:11)\";\n\n      global.__reanimatedWorkletInit(_f);\n\n      return _f;\n    }()\n  }, [directions, dismissible, setTranslation, returnToOrigin]);\n  return _jsx(View, {\n    ref: containerRef,\n    style: containerStyle,\n    onLayout: onLayout,\n    children: _jsx(PanGestureHandler, {\n      onGestureEvent: isEmpty(directions) ? undefined : onGestureEvent,\n      children: _jsx(Animated.View, {\n        style: animatedStyle,\n        children: _jsx(View, _objectSpread(_objectSpread({}, others), {}, {\n          children: children\n        }))\n      })\n    })\n  });\n};\n\nPanView.propTypes = {\n  directions: _pt.array,\n  dismissible: _pt.bool,\n  animateToOrigin: _pt.bool,\n  onDismiss: _pt.func,\n  directionLock: _pt.bool,\n  children: _pt.oneOfType([_pt.node, _pt.arrayOf(_pt.node)])\n};\nPanView.displayName = 'PanView';\nPanView.directions = PanViewDirectionsEnum;\nPanView.defaultProps = {\n  threshold: DEFAULT_THRESHOLD\n};\nexport default asBaseComponent(PanView);","map":{"version":3,"sources":["/Users/aliabji/code/dogs/Pawls/node_modules/react-native-ui-lib/src/incubator/panView/index.js"],"names":["_pt","isEmpty","React","useCallback","PanGestureHandler","Animated","useSharedValue","useAnimatedStyle","withSpring","withTiming","useAnimatedGestureHandler","runOnJS","asBaseComponent","View","PanningDirections","PanningDirectionsEnum","getTranslation","getDismissVelocity","DEFAULT_THRESHOLD","useHiddenLocation","PanViewDirectionsEnum","SPRING_BACK_ANIMATION_CONFIG","velocity","damping","stiffness","mass","PanView","props","directions","UP","DOWN","LEFT","RIGHT","dismissible","animateToOrigin","onDismiss","directionLock","threshold","containerStyle","children","others","waitingForDismiss","translationX","translationY","animatedStyle","transform","translateX","value","translateY","containerRef","createRef","onLayout","hiddenLocation","getTranslationOptions","currentTranslation","x","y","setTranslation","event","initialTranslation","result","dismiss","isFinished","returnToOrigin","onGestureEvent","onStart","_event","context","onActive","onEnd","undefined","toX","right","left","duration","Math","abs","toY","down","up","propTypes","array","bool","func","oneOfType","node","arrayOf","displayName","defaultProps"],"mappings":"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","sourcesContent":["import _pt from \"prop-types\";\nimport { isEmpty } from 'lodash';\nimport React, { useCallback } from 'react';\nimport { PanGestureHandler } from 'react-native-gesture-handler';\nimport Animated, { useSharedValue, useAnimatedStyle, withSpring, withTiming, useAnimatedGestureHandler, runOnJS } from 'react-native-reanimated';\nimport { asBaseComponent } from \"../../commons/new\";\nimport View from \"../../components/view\";\nimport { PanningDirections, PanningDirectionsEnum, getTranslation, getDismissVelocity, DEFAULT_THRESHOLD } from \"./panningUtil\";\nimport useHiddenLocation from \"../hooks/useHiddenLocation\";\nconst PanViewDirectionsEnum = PanningDirectionsEnum;\nexport { PanningDirections, PanningDirectionsEnum, PanViewDirectionsEnum };\nconst SPRING_BACK_ANIMATION_CONFIG = {\n  velocity: 300,\n  damping: 20,\n  stiffness: 300,\n  mass: 0.8\n};\n\nconst PanView = props => {\n  const {\n    directions = [PanViewDirectionsEnum.UP, PanViewDirectionsEnum.DOWN, PanViewDirectionsEnum.LEFT, PanViewDirectionsEnum.RIGHT],\n    dismissible,\n    animateToOrigin,\n    onDismiss,\n    directionLock,\n    threshold,\n    containerStyle,\n    children,\n    ...others\n  } = props;\n  const waitingForDismiss = useSharedValue(false);\n  const translationX = useSharedValue(0);\n  const translationY = useSharedValue(0);\n  const animatedStyle = useAnimatedStyle(() => {\n    return {\n      transform: [{\n        translateX: translationX.value\n      }, {\n        translateY: translationY.value\n      }]\n    };\n  }, []);\n  const containerRef = React.createRef();\n  const {\n    onLayout,\n    hiddenLocation\n  } = useHiddenLocation({\n    containerRef\n  });\n\n  const getTranslationOptions = () => {\n    'worklet';\n\n    return {\n      directionLock,\n      currentTranslation: {\n        x: translationX.value,\n        y: translationY.value\n      }\n    };\n  };\n\n  const setTranslation = (event, initialTranslation) => {\n    'worklet';\n\n    const result = getTranslation(event, initialTranslation, directions, getTranslationOptions());\n    translationX.value = result.x;\n    translationY.value = result.y;\n  };\n\n  const dismiss = useCallback(isFinished => {\n    'worklet';\n\n    if (isFinished && waitingForDismiss.value && onDismiss) {\n      waitingForDismiss.value = false;\n      runOnJS(onDismiss)();\n    }\n  }, // eslint-disable-next-line react-hooks/exhaustive-deps\n  [onDismiss]);\n  const returnToOrigin = useCallback(() => {\n    'worklet';\n\n    if (animateToOrigin) {\n      translationX.value = withSpring(0, SPRING_BACK_ANIMATION_CONFIG);\n      translationY.value = withSpring(0, SPRING_BACK_ANIMATION_CONFIG);\n    } // eslint-disable-next-line react-hooks/exhaustive-deps\n\n  }, [animateToOrigin]);\n  const onGestureEvent = useAnimatedGestureHandler({\n    onStart: (_event, context) => {\n      context.initialTranslation = {\n        x: translationX.value,\n        y: translationY.value\n      };\n    },\n    onActive: (event, context) => {\n      setTranslation(event, context.initialTranslation);\n    },\n    onEnd: event => {\n      if (dismissible) {\n        const velocity = getDismissVelocity(event, directions, getTranslationOptions(), threshold);\n\n        if (velocity) {\n          waitingForDismiss.value = true;\n\n          if (translationX.value !== 0 && velocity.x !== undefined && velocity.x !== 0) {\n            const toX = velocity.x > 0 ? hiddenLocation.right : hiddenLocation.left;\n            const duration = Math.abs((toX - translationX.value) / velocity.x) * 1000;\n            translationX.value = withTiming(toX, {\n              duration\n            }, dismiss);\n          }\n\n          if (translationY.value !== 0 && velocity.y !== undefined && velocity.y !== 0) {\n            const toY = velocity.y > 0 ? hiddenLocation.down : hiddenLocation.up;\n            const duration = Math.abs((toY - translationY.value) / velocity.y) * 1000;\n            translationY.value = withTiming(toY, {\n              duration\n            }, dismiss);\n          }\n        } else {\n          returnToOrigin();\n        }\n      } else {\n        returnToOrigin();\n      }\n    }\n  }, [directions, dismissible, setTranslation, returnToOrigin]);\n  return (// TODO: delete comments once completed\n    <View ref={containerRef} style={containerStyle} onLayout={onLayout}>\n      <PanGestureHandler onGestureEvent={isEmpty(directions) ? undefined : onGestureEvent}>\n        <Animated.View // !visible.current && styles.hidden is done to fix a bug is iOS\n        //   style={[style, animatedStyle, !visible.current && styles.hidden]}\n        style={animatedStyle} //   style={[style]}\n        >\n          <View {...others}>{children}</View>\n        </Animated.View>\n      </PanGestureHandler>\n    </View>\n  );\n};\n\nPanView.propTypes = {\n  /**\n     * The directions of the allowed pan (default is all)\n     * Types: UP, DOWN, LEFT and RIGHT (using PanView.directions.###)\n     */\n  directions: _pt.array,\n\n  /**\n     * Dismiss the view if over the threshold (translation or velocity).\n     */\n  dismissible: _pt.bool,\n\n  /**\n     * Animate to start if not dismissed.\n     */\n  animateToOrigin: _pt.bool,\n\n  /**\n     * Callback to the dismiss animation end\n     */\n  onDismiss: _pt.func,\n\n  /**\n     * Should the direction of dragging be locked once a drag has started.\n     */\n  directionLock: _pt.bool,\n  children: _pt.oneOfType([_pt.node, _pt.arrayOf(_pt.node)])\n};\nPanView.displayName = 'PanView';\nPanView.directions = PanViewDirectionsEnum;\nPanView.defaultProps = {\n  threshold: DEFAULT_THRESHOLD\n};\nexport default asBaseComponent(PanView);"]},"metadata":{},"sourceType":"module"}