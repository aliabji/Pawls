{"ast":null,"code":"import _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\n\nimport React, { useCallback, useEffect, useMemo, useRef, useState } from 'react';\nimport ActivityIndicator from \"react-native-web/dist/exports/ActivityIndicator\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport findNodeHandle from \"react-native-web/dist/exports/findNodeHandle\";\nimport AccessibilityInfo from \"react-native-web/dist/exports/AccessibilityInfo\";\nimport _ from 'lodash';\nimport { Constants, asBaseComponent } from \"../../commons/new\";\nimport { useDidUpdate } from \"../../hooks\";\nimport { Colors, BorderRadiuses, Spacings, Typography, Shadows } from \"../../style\";\nimport View from \"../../components/view\";\nimport Text from \"../../components/text\";\nimport Icon from \"../../components/icon\";\nimport Button from \"../../components/button\";\nimport PanView from \"../panView\";\nimport { ToastProps, ToastPresets } from \"./types\";\nimport useToastTimer from \"./helpers/useToastTimer\";\nimport useToastPresets from \"./helpers/useToastPresets\";\nimport useToastAnimation from \"./helpers/useToastAnimation\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-runtime\";\nvar THRESHOLD = {\n  x: Constants.screenWidth / 4,\n  y: 10\n};\n\nvar Toast = function Toast(props) {\n  var visible = props.visible,\n      _props$position = props.position,\n      position = _props$position === void 0 ? 'bottom' : _props$position,\n      icon = props.icon,\n      iconColor = props.iconColor,\n      preset = props.preset,\n      zIndex = props.zIndex,\n      elevation = props.elevation,\n      style = props.style,\n      containerStyle = props.containerStyle,\n      message = props.message,\n      messageStyle = props.messageStyle,\n      renderAttachment = props.renderAttachment,\n      centerMessage = props.centerMessage,\n      showLoader = props.showLoader,\n      action = props.action,\n      swipeable = props.swipeable,\n      backgroundColor = props.backgroundColor,\n      onDismiss = props.onDismiss,\n      onAnimationEnd = props.onAnimationEnd,\n      children = props.children,\n      testID = props.testID;\n  var directions = useRef([props.position === 'bottom' ? PanView.directions.DOWN : PanView.directions.UP, PanView.directions.LEFT, PanView.directions.RIGHT]);\n  var viewRef = useRef();\n\n  var _useState = useState(),\n      _useState2 = _slicedToArray(_useState, 2),\n      toastHeight = _useState2[0],\n      setToastHeight = _useState2[1];\n\n  var _useToastTimer = useToastTimer(props),\n      clearTimer = _useToastTimer.clearTimer,\n      setTimer = _useToastTimer.setTimer;\n\n  var toastPreset = useToastPresets({\n    icon: icon,\n    iconColor: iconColor,\n    message: message,\n    preset: preset\n  });\n\n  var playAccessibilityFeatures = function playAccessibilityFeatures() {\n    if (visible) {\n      if (viewRef.current && action) {\n        var reactTag = findNodeHandle(viewRef.current);\n        AccessibilityInfo.setAccessibilityFocus(reactTag);\n      } else if (message) {\n        AccessibilityInfo.announceForAccessibility == null ? void 0 : AccessibilityInfo.announceForAccessibility(toastPreset.accessibilityMessage);\n      }\n    }\n  };\n\n  var _useToastAnimation = useToastAnimation({\n    visible: visible,\n    position: position,\n    onAnimationEnd: onAnimationEnd,\n    toastHeight: toastHeight,\n    setTimer: setTimer,\n    playAccessibilityFeatures: playAccessibilityFeatures\n  }),\n      isAnimating = _useToastAnimation.isAnimating,\n      toggleToast = _useToastAnimation.toggleToast,\n      opacityStyle = _useToastAnimation.opacityStyle,\n      translateStyle = _useToastAnimation.translateStyle;\n\n  useEffect(function () {\n    if (visible) {\n      toggleToast(visible, {\n        delay: 100\n      });\n    }\n\n    return function () {\n      return clearTimer();\n    };\n  }, []);\n  useDidUpdate(function () {\n    if (!visible) {\n      clearTimer();\n    }\n\n    toggleToast(visible);\n  }, [visible]);\n  var handleDismiss = useCallback(function () {\n    clearTimer();\n    onDismiss == null ? void 0 : onDismiss();\n  }, [onDismiss]);\n  var positionStyle = useMemo(function () {\n    return _defineProperty({\n      position: 'absolute',\n      left: 0,\n      right: 0\n    }, position, 0);\n  }, [position]);\n  var toastStyle = useMemo(function () {\n    return [opacityStyle, containerStyle];\n  }, [opacityStyle, containerStyle]);\n  var toastContainerStyle = useMemo(function () {\n    return [positionStyle, translateStyle, {\n      zIndex: zIndex,\n      elevation: elevation\n    }];\n  }, [positionStyle, translateStyle, zIndex, elevation]);\n  var onLayout = useCallback(function (event) {\n    var height = event.nativeEvent.layout.height;\n\n    if (height !== toastHeight) {\n      setToastHeight(height);\n    }\n  }, [toastHeight]);\n\n  var renderRightElement = function renderRightElement() {\n    if (showLoader) {\n      return _jsx(ActivityIndicator, {\n        size: 'small',\n        testID: testID + \"-loader\",\n        color: Colors.rgba(Colors.grey30, 0.7),\n        style: styles.loader\n      });\n    }\n\n    if (action) {\n      return _jsx(Button, _objectSpread(_objectSpread({\n        link: true,\n        style: styles.action,\n        color: Colors.grey20\n      }, action), {}, {\n        labelStyle: Typography.bodySmallBold,\n        accessibilityRole: 'button',\n        activeBackgroundColor: Colors.grey70,\n        testID: testID + \"-action\"\n      }));\n    }\n  };\n\n  var renderMessage = function renderMessage() {\n    var textAlign = centerMessage ? 'center' : 'left';\n    return _jsx(View, {\n      accessible: Constants.isIOS,\n      style: styles.messageContainer,\n      children: _jsx(Text, {\n        testID: testID + \"-message\",\n        ref: viewRef,\n        style: [styles.message, {\n          textAlign: textAlign\n        }, messageStyle],\n        accessibilityLabel: toastPreset.accessibilityMessage,\n        children: message\n      })\n    });\n  };\n\n  var renderIcon = function renderIcon() {\n    return _jsx(Icon, {\n      source: toastPreset.icon,\n      resizeMode: 'contain',\n      style: styles.icon,\n      tintColor: toastPreset.iconColor\n    });\n  };\n\n  var renderToastContent = function renderToastContent() {\n    if (!_.isUndefined(children)) {\n      return children;\n    }\n\n    return _jsx(PanView, {\n      directions: swipeable ? directions.current : [],\n      dismissible: true,\n      animateToOrigin: true,\n      directionLock: true,\n      onDismiss: handleDismiss,\n      threshold: THRESHOLD,\n      children: _jsxs(View, {\n        style: [styles.toastContent, style, backgroundColor ? {\n          backgroundColor: backgroundColor\n        } : undefined],\n        children: [renderIcon(), renderMessage(), renderRightElement()]\n      })\n    });\n  };\n\n  var renderAttachmentContent = function renderAttachmentContent() {\n    if (renderAttachment) {\n      return _jsx(View, {\n        pointerEvents: 'box-none',\n        children: renderAttachment()\n      });\n    }\n  };\n\n  var _renderAttachment = function _renderAttachment(positionStyle, zIndex) {\n    return _jsx(View, {\n      style: [positionStyle, {\n        zIndex: zIndex\n      }],\n      pointerEvents: 'box-none',\n      children: renderAttachmentContent()\n    });\n  };\n\n  var renderToast = function renderToast() {\n    var isTop = position === 'top';\n    return _jsxs(_Fragment, {\n      children: [!isTop && !!toastHeight && renderAttachmentContent(), _jsx(View, {\n        animated: true,\n        useSafeArea: true,\n        style: toastStyle,\n        onLayout: onLayout,\n        pointerEvents: visible ? 'box-none' : 'none',\n        children: renderToastContent()\n      }), isTop && !!toastHeight && renderAttachmentContent()]\n    });\n  };\n\n  if (!visible && !isAnimating) {\n    return renderAttachment ? _renderAttachment(positionStyle, zIndex) : null;\n  }\n\n  return _jsx(View, {\n    animated: true,\n    testID: testID,\n    style: toastContainerStyle,\n    pointerEvents: 'box-none',\n    children: renderToast()\n  }, \"toast\");\n};\n\nvar styles = StyleSheet.create({\n  toastContent: _objectSpread(_objectSpread({\n    backgroundColor: Colors.white,\n    minHeight: 48,\n    flexDirection: 'row',\n    alignSelf: 'center',\n    alignItems: 'center',\n    borderRadius: BorderRadiuses.br40\n  }, Shadows.sh20.bottom), {}, {\n    marginHorizontal: Spacings.s5,\n    marginVertical: Spacings.s3,\n    paddingLeft: Spacings.s3\n  }),\n  messageContainer: {\n    flex: Constants.isTablet ? undefined : 1,\n    paddingVertical: Spacings.s3,\n    justifyContent: 'center'\n  },\n  message: _objectSpread(_objectSpread({}, Typography.bodySmall), {}, {\n    color: Colors.grey10,\n    marginLeft: Spacings.s2,\n    marginRight: Spacings.s5\n  }),\n  icon: {\n    width: 24,\n    height: 24,\n    marginRight: Spacings.s1\n  },\n  loader: {\n    marginRight: Spacings.s3\n  },\n  action: {\n    backgroundColor: Colors.grey80,\n    borderTopRightRadius: BorderRadiuses.br40,\n    borderBottomRightRadius: BorderRadiuses.br40,\n    paddingHorizontal: Spacings.s3,\n    height: '100%'\n  }\n});\nexport { ToastProps, ToastPresets };\nexport default asBaseComponent(Toast);","map":{"version":3,"sources":["/Users/aliabji/code/dogs/Pawls/node_modules/react-native-ui-lib/src/incubator/toast/index.js"],"names":["React","useCallback","useEffect","useMemo","useRef","useState","_","Constants","asBaseComponent","useDidUpdate","Colors","BorderRadiuses","Spacings","Typography","Shadows","View","Text","Icon","Button","PanView","ToastProps","ToastPresets","useToastTimer","useToastPresets","useToastAnimation","THRESHOLD","x","screenWidth","y","Toast","props","visible","position","icon","iconColor","preset","zIndex","elevation","style","containerStyle","message","messageStyle","renderAttachment","centerMessage","showLoader","action","swipeable","backgroundColor","onDismiss","onAnimationEnd","children","testID","directions","DOWN","UP","LEFT","RIGHT","viewRef","toastHeight","setToastHeight","clearTimer","setTimer","toastPreset","playAccessibilityFeatures","current","reactTag","findNodeHandle","AccessibilityInfo","setAccessibilityFocus","announceForAccessibility","accessibilityMessage","isAnimating","toggleToast","opacityStyle","translateStyle","delay","handleDismiss","positionStyle","left","right","toastStyle","toastContainerStyle","onLayout","event","height","nativeEvent","layout","renderRightElement","rgba","grey30","styles","loader","grey20","bodySmallBold","grey70","renderMessage","textAlign","isIOS","messageContainer","renderIcon","renderToastContent","isUndefined","toastContent","undefined","renderAttachmentContent","_renderAttachment","renderToast","isTop","StyleSheet","create","white","minHeight","flexDirection","alignSelf","alignItems","borderRadius","br40","sh20","bottom","marginHorizontal","s5","marginVertical","s3","paddingLeft","flex","isTablet","paddingVertical","justifyContent","bodySmall","color","grey10","marginLeft","s2","marginRight","width","s1","grey80","borderTopRightRadius","borderBottomRightRadius","paddingHorizontal"],"mappings":"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","sourcesContent":["import React, { useCallback, useEffect, useMemo, useRef, useState } from 'react';\nimport { ActivityIndicator, StyleSheet, findNodeHandle, AccessibilityInfo } from 'react-native';\nimport _ from 'lodash';\nimport { Constants, asBaseComponent } from \"../../commons/new\";\nimport { useDidUpdate } from \"../../hooks\";\nimport { Colors, BorderRadiuses, Spacings, Typography, Shadows } from \"../../style\";\nimport View from \"../../components/view\";\nimport Text from \"../../components/text\";\nimport Icon from \"../../components/icon\";\nimport Button from \"../../components/button\";\nimport PanView from \"../panView\";\nimport { ToastProps, ToastPresets } from \"./types\";\nimport useToastTimer from \"./helpers/useToastTimer\";\nimport useToastPresets from \"./helpers/useToastPresets\";\nimport useToastAnimation from \"./helpers/useToastAnimation\";\nconst THRESHOLD = {\n  x: Constants.screenWidth / 4,\n  y: 10\n};\n\nconst Toast = props => {\n  const {\n    visible,\n    position = 'bottom',\n    icon,\n    iconColor,\n    preset,\n    zIndex,\n    elevation,\n    style,\n    containerStyle,\n    message,\n    messageStyle,\n    renderAttachment,\n    centerMessage,\n    showLoader,\n    action,\n    swipeable,\n    backgroundColor,\n    onDismiss,\n    onAnimationEnd,\n    children,\n    testID\n  } = props;\n  const directions = useRef([props.position === 'bottom' ? PanView.directions.DOWN : PanView.directions.UP, PanView.directions.LEFT, PanView.directions.RIGHT]);\n  const viewRef = useRef();\n  const [toastHeight, setToastHeight] = useState();\n  const {\n    clearTimer,\n    setTimer\n  } = useToastTimer(props);\n  const toastPreset = useToastPresets({\n    icon,\n    iconColor,\n    message,\n    preset\n  });\n\n  const playAccessibilityFeatures = () => {\n    if (visible) {\n      if (viewRef.current && action) {\n        // @ts-expect-error\n        const reactTag = findNodeHandle(viewRef.current);\n        AccessibilityInfo.setAccessibilityFocus(reactTag);\n      } else if (message) {\n        AccessibilityInfo.announceForAccessibility?.(toastPreset.accessibilityMessage);\n      }\n    }\n  };\n\n  const {\n    isAnimating,\n    toggleToast,\n    opacityStyle,\n    translateStyle\n  } = useToastAnimation({\n    visible,\n    position,\n    onAnimationEnd,\n    toastHeight,\n    setTimer,\n    playAccessibilityFeatures\n  });\n  useEffect(() => {\n    if (visible) {\n      toggleToast(visible, {\n        delay: 100\n      });\n    }\n\n    return () => clearTimer();\n  }, []);\n  useDidUpdate(() => {\n    if (!visible) {\n      clearTimer();\n    }\n\n    toggleToast(visible);\n  }, [visible]);\n  const handleDismiss = useCallback(() => {\n    clearTimer();\n    onDismiss?.();\n  }, [onDismiss]);\n  const positionStyle = useMemo(() => {\n    return {\n      position: 'absolute',\n      left: 0,\n      right: 0,\n      [position]: 0\n    };\n  }, [position]);\n  const toastStyle = useMemo(() => {\n    return [opacityStyle, containerStyle];\n  }, [opacityStyle, containerStyle]);\n  const toastContainerStyle = useMemo(() => {\n    return [positionStyle, translateStyle, {\n      zIndex,\n      elevation\n    }];\n  }, [positionStyle, translateStyle, zIndex, elevation]);\n  const onLayout = useCallback(event => {\n    const height = event.nativeEvent.layout.height;\n\n    if (height !== toastHeight) {\n      setToastHeight(height);\n    }\n  }, [toastHeight]);\n\n  const renderRightElement = () => {\n    // NOTE: order does matter\n    if (showLoader) {\n      return <ActivityIndicator size={'small'} testID={`${testID}-loader`} color={Colors.rgba(Colors.grey30, 0.7)} style={styles.loader} /> // <Loader size={Loader.sizes.SMALL} color={loaderColors} style={styles.loader} testID={`${testID}-loader`}/>\n      ;\n    }\n\n    if (action) {\n      return <Button link style={styles.action} color={Colors.grey20} {...action} labelStyle={Typography.bodySmallBold} accessibilityRole={'button'} activeBackgroundColor={Colors.grey70} testID={`${testID}-action`} />;\n    }\n  };\n\n  const renderMessage = () => {\n    const textAlign = centerMessage ? 'center' : 'left';\n    return <View accessible={Constants.isIOS} style={styles.messageContainer}>\n        <Text testID={`${testID}-message`} // @ts-expect-error\n      ref={viewRef} style={[styles.message, {\n        textAlign\n      }, messageStyle]} accessibilityLabel={toastPreset.accessibilityMessage}>\n          {message}\n        </Text>\n      </View>;\n  };\n\n  const renderIcon = () => {\n    return <Icon source={toastPreset.icon} resizeMode={'contain'} style={styles.icon} tintColor={toastPreset.iconColor} />;\n  };\n\n  const renderToastContent = () => {\n    if (!_.isUndefined(children)) {\n      return children;\n    }\n\n    return <PanView directions={swipeable ? directions.current : []} dismissible animateToOrigin directionLock onDismiss={handleDismiss} threshold={THRESHOLD}>\n        <View style={[styles.toastContent, style, backgroundColor ? {\n        backgroundColor\n      } : undefined]}>\n          {renderIcon()}\n          {renderMessage()}\n          {renderRightElement()}\n        </View>\n      </PanView>;\n  };\n\n  const renderAttachmentContent = () => {\n    if (renderAttachment) {\n      return <View pointerEvents={'box-none'}>{renderAttachment()}</View>;\n    }\n  };\n\n  const _renderAttachment = (positionStyle, zIndex) => {\n    return <View style={[positionStyle, {\n      zIndex\n    }]} pointerEvents={'box-none'}>\n        {renderAttachmentContent()}\n      </View>;\n  };\n\n  const renderToast = () => {\n    const isTop = position === 'top';\n    return <>\n        {!isTop && !!toastHeight && renderAttachmentContent()}\n        <View animated useSafeArea style={toastStyle} onLayout={onLayout} pointerEvents={visible ? 'box-none' : 'none'}>\n          {renderToastContent()}\n        </View>\n        {isTop && !!toastHeight && renderAttachmentContent()}\n      </>;\n  };\n\n  if (!visible && !isAnimating) {\n    return renderAttachment ? _renderAttachment(positionStyle, zIndex) : null;\n  }\n\n  return <View key=\"toast\" animated testID={testID} style={toastContainerStyle} pointerEvents={'box-none'}>\n      {renderToast()}\n    </View>;\n};\n\nconst styles = StyleSheet.create({\n  toastContent: {\n    backgroundColor: Colors.white,\n    minHeight: 48,\n    flexDirection: 'row',\n    alignSelf: 'center',\n    alignItems: 'center',\n    borderRadius: BorderRadiuses.br40,\n    ...Shadows.sh20.bottom,\n    marginHorizontal: Spacings.s5,\n    marginVertical: Spacings.s3,\n    paddingLeft: Spacings.s3\n  },\n  messageContainer: {\n    flex: Constants.isTablet ? undefined : 1,\n    paddingVertical: Spacings.s3,\n    justifyContent: 'center'\n  },\n  message: { ...Typography.bodySmall,\n    color: Colors.grey10,\n    marginLeft: Spacings.s2,\n    marginRight: Spacings.s5\n  },\n  icon: {\n    width: 24,\n    height: 24,\n    marginRight: Spacings.s1\n  },\n  loader: {\n    marginRight: Spacings.s3\n  },\n  action: {\n    backgroundColor: Colors.grey80,\n    borderTopRightRadius: BorderRadiuses.br40,\n    borderBottomRightRadius: BorderRadiuses.br40,\n    paddingHorizontal: Spacings.s3,\n    height: '100%'\n  }\n});\nexport { ToastProps, ToastPresets };\nexport default asBaseComponent(Toast);"]},"metadata":{},"sourceType":"module"}